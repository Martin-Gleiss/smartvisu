/* smartVISU, Martin Glei√ü, 2013, GPL [http://www.gnu.de] */
Number.prototype.limit=function(a,b,c){ret=this;ret<a&&(ret=a);ret>b&&(ret=b);c&&(ret=Math.floor(ret,c));return ret};String.prototype.explode=function(a){ret=[];if(this.length)for(ret=this.split(void 0!==a?a:","),a=0;a<ret.length;a++)ret[a]=ret[a].trim();return ret};
Date.prototype.duration=function(a){var b={y:307584E5,m:2592E6,w:6048E5,d:864E5,h:36E5,i:6E4,s:1E3},c=0;if(a){a=a.toLowerCase().split(" ");for(var d=0,e=1,e=-1,f=c=0;f<a.length;f+=1)if(Number(a[f]))d=a[f];else{if(e=a[f].match(/[a-z]/)){var g=e.index,e=a[f].substr(g);0<g&&(d=a[f].substr(0,g))}else e=a[f];e&&d&&(e=b[e],c+=d*e,d=0)}0==c&&0<d&&(c=d*b.s)}return new Date(c)};
(function(a){a.fn.extend({miniclock:function(){return this.each(function(){var b=a(this);b.displayMiniClock(b)})}});a.fn.displayMiniClock=function(b){var c=new Date;b.html(c.getHours()+":"+(10>c.getMinutes()?"0"+c.getMinutes():c.getMinutes()));setTimeout(function(){a.fn.displayMiniClock(b)},a.fn.delay())};a.fn.delay=function(){return 1E3*(60-(new Date).getSeconds())}})(jQuery);
var fx={rotate:function(a,b,c){var d=a[0]-c[0],e=a[1]-c[1];a=Math.sqrt(d*d+e*e);d=Math.atan2(d,e)+b+0.5*Math.PI;b=Math.round(Math.cos(d)*a+c[0]);c=Math.round(Math.sin(d)*a+c[1]);return[b,c]},grid:function(a,b,c,d){var e;for($(a).children().each(function(a){a=$(this);a.is("line")&&a.remove()});0<b;)e=document.createElementNS("http://www.w3.org/2000/svg","line"),e.setAttribute("x1",c[0]),e.setAttribute("y1",c[1]<d[1]?c[1]+b:c[1]-b),e.setAttribute("x2",d[0]),e.setAttribute("y2",c[1]<d[1]?c[1]+b:c[1]-
b),$(a).append(e),b-=6},hsv2rgb:function(a,b,c){var d,e,f;a=Math.max(0,Math.min(360,a));b=Math.max(0,Math.min(100,b));c=Math.max(0,Math.min(100,c));b/=100;c/=100;if(0==b)d=b=c;else switch(a/=60,d=Math.floor(a),e=a-d,a=c*(1-b),f=c*(1-b*e),e=c*(1-b*(1-e)),d){case 0:d=c;b=e;c=a;break;case 1:d=f;b=c;c=a;break;case 2:d=a;b=c;c=e;break;case 3:d=a;b=f;break;case 4:d=e;b=a;break;default:d=c,b=a,c=f}d=Math.round(255*d);b=Math.round(255*b);c=Math.round(255*c);return"rgb("+d+","+b+","+c+")"}},notify={i:0,messages:{},
exists:function(){var a=!1,b;for(b in notify.messages)a=!0;return a},add:function(a,b,c,d){notify.i++;notify.messages[notify.i]=[];notify.messages[notify.i]={status:a,signal:b,title:c,text:d,stamp:Date.now()}},debug:function(a,b){},update:function(a,b){notify.add("update","UPDATE",a,b);notify.display()},info:function(a,b){notify.add("info","INFO",a,b);notify.display()},error:function(a,b){notify.add("error","ERROR",a,b);notify.display()},json:function(a,b,c){a=jQuery.parseJSON(a.responseText);for(b=
0;b<a.length;b++)notify.add("error","ERROR",a[b].title,a[b].text);notify.display()},remove:function(a){var b=notify.messages[notify.i];$(".alert").popup("close");$(".signal").removeClass(b.status);$(".signal").hide();void 0!==a?delete notify.messages[a]:notify.messages={}},display:function(){var a=notify.messages[notify.i];a&&($(".signal").addClass(a.status),$(".signal").html(a.signal),$(".alert h1").html(a.title),$(".alert p").html(a.text),$(".alert .stamp").html((new Date(a.stamp)).transShort()),
$(".signal").show())}}; 

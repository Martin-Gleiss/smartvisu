/*
 Highcharts JS v11.0.1 (2023-05-08)

 (c) 2009-2022

 License: www.highcharts.com/license
*/
'use strict';(function(f){"object"===typeof module&&module.exports?(f["default"]=f,module.exports=f):"function"===typeof define&&define.amd?define("highcharts/modules/flowmap",["highcharts"],function(t){f(t);f.Highcharts=t;return f}):f("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(f){function t(g,e,h,c){g.hasOwnProperty(e)||(g[e]=c.apply(null,h),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:g[e]}})))}f=f?f._modules:
{};t(f,"Series/FlowMap/FlowMapPoint.js",[f["Core/Series/SeriesRegistry.js"],f["Core/Utilities.js"]],function(g,e){var h=this&&this.__extends||function(){var a=function(c,d){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,p){a.__proto__=p}||function(a,p){for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(a[b]=p[b])};return a(c,d)};return function(c,d){function m(){this.constructor=c}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+
" is not a constructor or null");a(c,d);c.prototype=null===d?Object.create(d):(m.prototype=d.prototype,new m)}}(),c=e.pick,a=e.isString,d=e.isNumber;return function(m){function e(){var a=null!==m&&m.apply(this,arguments)||this;a.options=void 0;a.series=void 0;return a}h(e,m);e.prototype.isValid=function(){var m=!(!this.options.to||!this.options.from);[this.options.to,this.options.from].forEach(function(e){m=!!(m&&e&&(a(e)||d(c(e[0],e.lat))&&d(c(e[1],e.lon))))});return m};return e}(g.seriesTypes.mapline.prototype.pointClass)});
t(f,"Series/ColorMapComposition.js",[f["Core/Series/SeriesRegistry.js"],f["Core/Utilities.js"]],function(g,e){var h=g.seriesTypes.column.prototype,c=e.addEvent,a=e.defined,d;(function(d){function m(a){this.moveToTopOnHover&&this.graphic&&this.graphic.attr({zIndex:a&&"hover"===a.state?1:0})}var g=[];d.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&Infinity!==this.value&&-Infinity!==this.value&&(void 0===this.value||!isNaN(this.value))}};d.seriesMembers=
{colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(d){var c={};!a(d.color)||d.state&&"normal"!==d.state||(c[this.colorProp||"fill"]=d.color);return c},pointAttribs:h.pointAttribs};d.compose=function(a){var d=a.prototype.pointClass;e.pushUnique(g,d)&&c(d,"afterSetState",m);return a}})(d||(d={}));return d});t(f,"Maps/MapSymbols.js",[f["Core/Renderer/SVG/SVGRenderer.js"]],
function(g){var e=g.prototype.symbols;e.bottombutton=function(h,c,a,d,m){if(m){var g=(null===m||void 0===m?void 0:m.r)||0;m.brBoxY=c-g;m.brBoxHeight=d+g}return e.roundedRect(h,c,a,d,m)};e.topbutton=function(h,c,a,d,m){m&&(m.brBoxHeight=d+((null===m||void 0===m?void 0:m.r)||0));return e.roundedRect(h,c,a,d,m)};return e});t(f,"Core/Chart/MapChart.js",[f["Core/Chart/Chart.js"],f["Core/Defaults.js"],f["Core/Renderer/SVG/SVGRenderer.js"],f["Core/Utilities.js"]],function(g,e,h,c){var a=this&&this.__extends||
function(){var a=function(d,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,l){b.__proto__=l}||function(b,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(b[a]=l[a])};return a(d,c)};return function(d,c){function b(){this.constructor=d}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(d,c);d.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)}}(),d=e.getOptions,m=c.merge,f=c.pick;
g=function(c){function e(){return null!==c&&c.apply(this,arguments)||this}a(e,c);e.prototype.init=function(a,b){var l=d().credits;a=m({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:f(l.mapText,' \u00a9 <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:f(l.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},a);c.prototype.init.call(this,a,b)};return e}(g);(function(a){a.maps={};a.mapChart=function(d,c,b){return new a(d,c,b)};a.splitPath=
function(a){"string"===typeof a&&(a=a.replace(/([A-Za-z])/g," $1 ").replace(/^\s*/,"").replace(/\s*$/,""),a=a.split(/[ ,;]+/).map(function(a){return/[A-za-z]/.test(a)?a:parseFloat(a)}));return h.prototype.pathToSegments(a)}})(g||(g={}));return g});t(f,"Maps/MapUtilities.js",[],function(){return{boundsFromPath:function(g){var e=-Number.MAX_VALUE,h=Number.MAX_VALUE,c=-Number.MAX_VALUE,a=Number.MAX_VALUE,d;g.forEach(function(m){var g=m[m.length-2];m=m[m.length-1];"number"===typeof g&&"number"===typeof m&&
(h=Math.min(h,g),e=Math.max(e,g),a=Math.min(a,m),c=Math.max(c,m),d=!0)});if(d)return{x1:h,y1:a,x2:e,y2:c}},pointInPolygon:function(g,e){var h,c=!1,a=g.x,d=g.y;g=0;for(h=e.length-1;g<e.length;h=g++){var m=e[g][1]>d;var f=e[h][1]>d;m!==f&&a<(e[h][0]-e[g][0])*(d-e[g][1])/(e[h][1]-e[g][1])+e[g][0]&&(c=!c)}return c}}});t(f,"Series/Map/MapPoint.js",[f["Series/ColorMapComposition.js"],f["Maps/MapUtilities.js"],f["Core/Series/SeriesRegistry.js"],f["Core/Utilities.js"]],function(g,e,h,c){var a=this&&this.__extends||
function(){var a=function(d,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(b[l]=a[l])};return a(d,b)};return function(d,b){function l(){this.constructor=d}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");a(d,b);d.prototype=null===b?Object.create(b):(l.prototype=b.prototype,new l)}}(),d=e.boundsFromPath,m=c.extend,
f=c.isNumber,r=c.pick;e=function(e){function g(){var b=null!==e&&e.apply(this,arguments)||this;b.options=void 0;b.path=void 0;b.series=void 0;return b}a(g,e);g.getProjectedPath=function(b,l){b.projectedPath||(l&&b.geometry?(l.hasCoordinates=!0,b.projectedPath=l.path(b.geometry)):b.projectedPath=b.path);return b.projectedPath||[]};g.prototype.applyOptions=function(b,l){var a=this.series;b=e.prototype.applyOptions.call(this,b,l);l=a.joinBy;a.mapData&&a.mapMap&&(l=e.prototype.getNestedProperty.call(b,
l[1]),(l="undefined"!==typeof l&&a.mapMap[l])?m(b,l):-1!==a.pointArrayMap.indexOf("value")&&(b.value=b.value||null));return b};g.prototype.getProjectedBounds=function(b){var l=g.getProjectedPath(this,b);l=d(l);var a=this.properties,c=this.series.chart.mapView;if(l){var e=a&&a["hc-middle-lon"],A=a&&a["hc-middle-lat"];c&&f(e)&&f(A)?(b=b.forward([e,A]),l.midX=b[0],l.midY=b[1]):(b=a&&a["hc-middle-x"],a=a&&a["hc-middle-y"],l.midX=l.x1+(l.x2-l.x1)*r(this.middleX,f(b)?b:.5),b=r(this.middleY,f(a)?a:.5),this.geometry||
(b=1-b),l.midY=l.y2-(l.y2-l.y1)*b);return l}};g.prototype.onMouseOver=function(b){c.clearTimeout(this.colorInterval);if(!this.isNull&&this.visible||this.series.options.nullInteraction)e.prototype.onMouseOver.call(this,b);else this.series.onMouseOut(b)};g.prototype.setVisible=function(b){var a=b?"show":"hide";this.visible=this.options.visible=!!b;if(this.dataLabel)this.dataLabel[a]();this.graphic&&this.graphic.attr(this.series.pointAttribs(this))};g.prototype.zoomTo=function(b){var a=this.series.chart,
d=a.mapView,c=this.bounds;if(d&&c){var e=f(this.insetIndex)&&d.insets[this.insetIndex];if(e){var A=e.projectedUnitsToPixels({x:c.x1,y:c.y1});c=e.projectedUnitsToPixels({x:c.x2,y:c.y2});A=d.pixelsToProjectedUnits({x:A.x,y:A.y});c=d.pixelsToProjectedUnits({x:c.x,y:c.y});c={x1:A.x,y1:A.y,x2:c.x,y2:c.y}}d.fitToBounds(c,void 0,!1);this.series.isDirty=!0;a.redraw(b)}};return g}(h.seriesTypes.scatter.prototype.pointClass);m(e.prototype,{dataLabelOnNull:g.pointMembers.dataLabelOnNull,moveToTopOnHover:g.pointMembers.moveToTopOnHover,
isValid:g.pointMembers.isValid});return e});t(f,"Maps/MapViewOptionsDefault.js",[],function(){return{center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0}});t(f,"Maps/MapViewInsetsOptionsDefault.js",[],function(){return{borderColor:"#cccccc",borderWidth:1,center:[0,0],padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}});t(f,"Extensions/GeoJSON.js",[f["Core/Chart/Chart.js"],f["Core/FormatUtilities.js"],f["Core/Globals.js"],
f["Core/Utilities.js"]],function(g,e,f,c){function a(b,a){a||(a=Object.keys(b.objects)[0]);a=b.objects[a];if(a["hc-decoded-geojson"])return a["hc-decoded-geojson"];var l=b.arcs;if(b.transform){var c=b.transform,d=c.scale,e=c.translate;l=b.arcs.map(function(b){var a=0,l=0;return b.map(function(b){b=b.slice();b[0]=(a+=b[0])*d[0]+e[0];b[1]=(l+=b[1])*d[1]+e[1];return b})})}var m=function(b){return"number"===typeof b[0]?b.reduce(function(b,a,c){var d=0>a?l[~a]:l[a];0>a?(d=d.slice(0,0===c?d.length:d.length-
1),d.reverse()):c&&(d=d.slice(1));return b.concat(d)},[]):b.map(m)};c=a.geometries.map(function(b){return{type:"Feature",properties:b.properties,geometry:{type:b.type,coordinates:b.coordinates||m(b.arcs)}}});b={type:"FeatureCollection",copyright:b.copyright,copyrightShort:b.copyrightShort,copyrightUrl:b.copyrightUrl,features:c,"hc-recommended-mapview":a["hc-recommended-mapview"],bbox:b.bbox,title:b.title};return a["hc-decoded-geojson"]=b}function d(b,l,d){void 0===l&&(l="map");var c=[];b="Topology"===
b.type?a(b):b;b.features.forEach(function(b){var a=b.geometry||{},d=a.type;a=a.coordinates;b=b.properties;var e;"map"!==l&&"mapbubble"!==l||"Polygon"!==d&&"MultiPolygon"!==d?"mapline"!==l||"LineString"!==d&&"MultiLineString"!==d?"mappoint"===l&&"Point"===d&&a.length&&(e={geometry:{coordinates:a,type:d}}):a.length&&(e={geometry:{coordinates:a,type:d}}):a.length&&(e={geometry:{coordinates:a,type:d}});if(e){d=b&&(b.name||b.NAME);a=b&&b.lon;var m=b&&b.lat;c.push(v(e,{lat:"number"===typeof m?m:void 0,
lon:"number"===typeof a?a:void 0,name:"string"===typeof d?d:void 0,properties:b}))}});d&&b.copyrightShort&&(d.chart.mapCredits=m(d.chart.options.credits.mapText,{geojson:b}),d.chart.mapCreditsFull=m(d.chart.options.credits.mapTextFull,{geojson:b}));return c}var m=e.format,h=f.win,r=c.error,v=c.extend,p=c.merge;e=c.wrap;"";g.prototype.transformFromLatLon=function(b,a){var d=this.options.chart.proj4||h.proj4;if(d){var c=a.jsonmarginX;c=void 0===c?0:c;var l=a.jsonmarginY;l=void 0===l?0:l;var e=a.jsonres;
e=void 0===e?1:e;var m=a.scale;m=void 0===m?1:m;var g=a.xoffset;g=void 0===g?0:g;var f=a.xpan;f=void 0===f?0:f;var k=a.yoffset;k=void 0===k?0:k;var q=a.ypan;q=void 0===q?0:q;b=d(a.crs,[b.lon,b.lat]);d=a.cosAngle||a.rotation&&Math.cos(a.rotation);var u=a.sinAngle||a.rotation&&Math.sin(a.rotation);a=a.rotation?[b[0]*d+b[1]*u,-b[0]*u+b[1]*d]:b;return{x:((a[0]-g)*m+f)*e+c,y:-(((k-a[1])*m+q)*e-l)}}r(21,!1,this)};g.prototype.transformToLatLon=function(b,a){var d=this.options.chart.proj4||h.proj4;if(!d)r(21,
!1,this);else if(null!==b.y){var c=a.jsonmarginX,l=a.jsonmarginY,e=a.jsonres;e=void 0===e?1:e;var m=a.scale;m=void 0===m?1:m;var g=a.xoffset,f=a.xpan,k=a.yoffset,q=a.ypan;b={x:((b.x-(void 0===c?0:c))/e-(void 0===f?0:f))/m+(void 0===g?0:g),y:((b.y-(void 0===l?0:l))/e+(void 0===q?0:q))/m+(void 0===k?0:k)};c=a.cosAngle||a.rotation&&Math.cos(a.rotation);l=a.sinAngle||a.rotation&&Math.sin(a.rotation);a=d(a.crs,"WGS84",a.rotation?{x:b.x*c+b.y*-l,y:b.x*l+b.y*c}:b);return{lat:a.y,lon:a.x}}};g.prototype.fromPointToLatLon=
function(a){return this.mapView&&this.mapView.projectedUnitsToLonLat(a)};g.prototype.fromLatLonToPoint=function(a){return this.mapView&&this.mapView.lonLatToProjectedUnits(a)};e(g.prototype,"addCredits",function(a,d){d=p(!0,this.options.credits,d);this.mapCredits&&(d.href=null);a.call(this,d);this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})});f.geojson=d;f.topo2geo=a;return{geojson:d,topo2geo:a}});t(f,"Core/Geometry/PolygonClip.js",[],function(){var g=function(c,a,
d){return(a[0]-c[0])*(d[1]-c[1])>(a[1]-c[1])*(d[0]-c[0])},e=function(c,a,d,e){var m=[c[0]-a[0],c[1]-a[1]],g=[d[0]-e[0],d[1]-e[1]];c=c[0]*a[1]-c[1]*a[0];d=d[0]*e[1]-d[1]*e[0];e=1/(m[0]*g[1]-m[1]*g[0]);m=[(c*g[0]-d*m[0])*e,(c*g[1]-d*m[1])*e];m.isIntersection=!0;return m},f;(function(c){c.clipLineString=function(a,d){var e=[];a=c.clipPolygon(a,d,!1);for(d=1;d<a.length;d++)a[d].isIntersection&&a[d-1].isIntersection&&(e.push(a.splice(0,d)),d=0),d===a.length-1&&e.push(a);return e};c.clipPolygon=function(a,
d,c){void 0===c&&(c=!0);for(var m=d[d.length-1],f,h,p=a,b=0;b<d.length;b++){var l=p;a=d[b];p=[];f=c?l[l.length-1]:l[0];for(var G=0;G<l.length;G++)h=l[G],g(m,a,h)?(g(m,a,f)||p.push(e(m,a,f,h)),p.push(h)):g(m,a,f)&&p.push(e(m,a,f,h)),f=h;m=a}return p}})(f||(f={}));return f});t(f,"Maps/Projections/LambertConformalConic.js",[],function(){var g=Math.sign||function(c){return 0===c?0:0<c?1:-1},e=Math.PI/180,f=Math.PI/2;return function(){function c(a){var d,c=(a.parallels||[]).map(function(a){return a*e}),
h=c[0]||0;c=null!==(d=c[1])&&void 0!==d?d:h;d=Math.cos(h);"object"===typeof a.projectedBounds&&(this.projectedBounds=a.projectedBounds);a=h===c?Math.sin(h):Math.log(d/Math.cos(c))/Math.log(Math.tan((f+c)/2)/Math.tan((f+h)/2));1e-10>Math.abs(a)&&(a=1e-10*(g(a)||1));this.n=a;this.c=d*Math.pow(Math.tan((f+h)/2),a)/a}c.prototype.forward=function(a){var d=a[0]*e,c=this.c,g=this.n,h=this.projectedBounds;a=a[1]*e;0<c?a<-f+.000001&&(a=-f+.000001):a>f-.000001&&(a=f-.000001);var v=c/Math.pow(Math.tan((f+a)/
2),g);a=v*Math.sin(g*d)*63.78137;d=63.78137*(c-v*Math.cos(g*d));c=[a,d];h&&(a<h.x1||a>h.x2||d<h.y1||d>h.y2)&&(c.outside=!0);return c};c.prototype.inverse=function(a){var d=a[0]/63.78137,c=this.c,h=this.n;a=c-a[1]/63.78137;var r=g(h)*Math.sqrt(d*d+a*a),v=Math.atan2(d,Math.abs(a))*g(a);0>a*h&&(v-=Math.PI*g(d)*g(a));return[v/h/e,(2*Math.atan(Math.pow(c/r,1/h))-f)/e]};return c}()});t(f,"Maps/Projections/EqualEarth.js",[],function(){var f=Math.sqrt(3)/2;return function(){function e(){this.bounds={x1:-200.37508342789243,
x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}e.prototype.forward=function(e){var c=Math.PI/180,a=Math.asin(f*Math.sin(e[1]*c)),d=a*a,g=d*d*d;return[e[0]*c*Math.cos(a)*74.03120656864502/(f*(1.340264+3*-.081106*d+g*(7*.000893+.034164*d))),74.03120656864502*a*(1.340264+-.081106*d+g*(.000893+.003796*d))]};e.prototype.inverse=function(e){var c=e[0]/74.03120656864502;e=e[1]/74.03120656864502;var a=180/Math.PI,d=e,g;for(g=0;12>g;++g){var h=d*d;var r=h*h*h;var v=d*(1.340264+-.081106*
h+r*(.000893+.003796*h))-e;h=1.340264+3*-.081106*h+r*(7*.000893+.034164*h);d-=v/=h;if(1e-9>Math.abs(v))break}h=d*d;return[a*f*c*(1.340264+3*-.081106*h+h*h*h*(7*.000893+.034164*h))/Math.cos(d),a*Math.asin(Math.sin(d)/f)]};return e}()});t(f,"Maps/Projections/Miller.js",[],function(){var f=Math.PI/4,e=Math.PI/180;return function(){function g(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}g.prototype.forward=function(c){return[c[0]*e*63.78137,
79.7267125*Math.log(Math.tan(f+.4*c[1]*e))]};g.prototype.inverse=function(c){return[c[0]/63.78137/e,2.5*(Math.atan(Math.exp(c[1]/63.78137*.8))-f)/e]};return g}()});t(f,"Maps/Projections/Orthographic.js",[],function(){var f=Math.PI/180;return function(){function e(){this.antimeridianCutting=!1;this.bounds={x1:-63.78460826781007,x2:63.78460826781007,y1:-63.78460826781007,y2:63.78460826781007}}e.prototype.forward=function(e){var c=e[0];e=e[1]*f;e=[Math.cos(e)*Math.sin(c*f)*63.78460826781007,63.78460826781007*
Math.sin(e)];if(-90>c||90<c)e.outside=!0;return e};e.prototype.inverse=function(e){var c=e[0]/63.78460826781007;e=e[1]/63.78460826781007;var a=Math.sqrt(c*c+e*e),d=Math.asin(a),g=Math.sin(d);return[Math.atan2(c*g,a*Math.cos(d))/f,Math.asin(a&&e*g/a)/f]};return e}()});t(f,"Maps/Projections/WebMercator.js",[],function(){var f=Math.PI/180;return function(){function e(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071};this.maxLatitude=85.0511287798}
e.prototype.forward=function(e){var c=Math.sin(e[1]*f);c=[63.78137*e[0]*f,63.78137*Math.log((1+c)/(1-c))/2];85.0511287798<Math.abs(e[1])&&(c.outside=!0);return c};e.prototype.inverse=function(e){return[e[0]/(63.78137*f),(2*Math.atan(Math.exp(e[1]/63.78137))-Math.PI/2)/f]};return e}()});t(f,"Maps/Projections/ProjectionRegistry.js",[f["Maps/Projections/LambertConformalConic.js"],f["Maps/Projections/EqualEarth.js"],f["Maps/Projections/Miller.js"],f["Maps/Projections/Orthographic.js"],f["Maps/Projections/WebMercator.js"]],
function(f,e,h,c,a){return{EqualEarth:e,LambertConformalConic:f,Miller:h,Orthographic:c,WebMercator:a}});t(f,"Maps/Projection.js",[f["Core/Geometry/PolygonClip.js"],f["Maps/Projections/ProjectionRegistry.js"],f["Core/Utilities.js"]],function(f,e,h){var c=this&&this.__spreadArray||function(a,b,c){if(c||2===arguments.length)for(var d=0,e=b.length,f;d<e;d++)!f&&d in b||(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))},a=f.clipLineString,d=f.clipPolygon,
g=h.clamp,t=h.erase,r=2*Math.PI/360,v=function(a){-180>a&&(a+=360);180<a&&(a-=360);return a};return function(){function f(a){void 0===a&&(a={});this.hasGeoProjection=this.hasCoordinates=!1;this.maxLatitude=90;this.options=a;var b=a.name,d=a.projectedBounds,c=a.rotation;this.rotator=c?this.getRotator(c):void 0;if(b=b?f.registry[b]:void 0)this.def=new b(a);var e=this.def,g=this.rotator;e&&(this.maxLatitude=e.maxLatitude||90,this.hasGeoProjection=!0);g&&e?(this.forward=function(a){return e.forward(g.forward(a))},
this.inverse=function(a){return g.inverse(e.inverse(a))}):e?(this.forward=function(a){return e.forward(a)},this.inverse=function(a){return e.inverse(a)}):g&&(this.forward=g.forward,this.inverse=g.inverse);this.bounds="world"===d?e&&e.bounds:d}f.add=function(a,d){f.registry[a]=d};f.greatCircle=function(a,d,c){var b=Math.atan2,e=Math.cos,f=Math.sin,l=Math.sqrt,g=a[1]*r,m=a[0]*r,k=d[1]*r,q=d[0]*r,u=k-g,h=q-m;u=f(u/2)*f(u/2)+e(g)*e(k)*f(h/2)*f(h/2);u=2*b(l(u),l(1-u));var B=Math.round(6371E3*u/5E5);h=
[];c&&h.push(a);if(1<B)for(B=a=1/B;.999>B;B+=a){var E=f((1-B)*u)/f(u),L=f(B*u)/f(u),n=E*e(g)*e(m)+L*e(k)*e(q),C=E*e(g)*f(m)+L*e(k)*f(q);E=E*f(g)+L*f(k);E=b(E,l(n*n+C*C));n=b(C,n);h.push([n/r,E/r])}c&&h.push(d);return h};f.insertGreatCircles=function(a){for(var b=a.length-1;b--;)if(10<Math.max(Math.abs(a[b][0]-a[b+1][0]),Math.abs(a[b][1]-a[b+1][1]))){var d=f.greatCircle(a[b],a[b+1]);d.length&&a.splice.apply(a,c([b+1,0],d,!1))}};f.toString=function(a){a=a||{};var b=a.rotation;return[a.name,b&&b.join(",")].join(";")};
f.prototype.lineIntersectsBounds=function(a){var b=this.bounds||{},d=b.x2,e=b.y1,c=b.y2,f=function(a,b,d){var e=a[0];a=a[1];var c=b?0:1;if("number"===typeof d&&e[b]>=d!==a[b]>=d)return e=e[c]+(d-e[b])/(a[b]-e[b])*(a[c]-e[c]),b?[e,d]:[d,e]},g=a[0];if(b=f(a,0,b.x1))g=b,a[1]=b;else if(b=f(a,0,d))g=b,a[1]=b;if(b=f(a,1,e))g=b;else if(b=f(a,1,c))g=b;return g};f.prototype.getRotator=function(a){var b=a[0]*r,d=(a[1]||0)*r;a=(a[2]||0)*r;var e=Math.cos(d),c=Math.sin(d),f=Math.cos(a),g=Math.sin(a);if(0!==b||
0!==d||0!==a)return{forward:function(a){var d=a[0]*r+b,k=a[1]*r,q=Math.cos(k);a=Math.cos(d)*q;d=Math.sin(d)*q;k=Math.sin(k);q=k*e+a*c;return[Math.atan2(d*f-q*g,a*e-k*c)/r,Math.asin(q*f+d*g)/r]},inverse:function(a){var d=a[0]*r,k=a[1]*r,q=Math.cos(k);a=Math.cos(d)*q;d=Math.sin(d)*q;k=Math.sin(k);q=k*f-d*g;return[(Math.atan2(d*f+k*g,a*e+q*c)-b)/r,Math.asin(q*e-a*c)/r]}}};f.prototype.forward=function(a){return a};f.prototype.inverse=function(a){return a};f.prototype.cutOnAntimeridian=function(a,d){var b=
[],e=[a];a.forEach(function(e,c){var f=a[c-1];if(!c){if(!d)return;f=a[a.length-1]}var k=f[0],n=e[0];(-90>k||90<k)&&(-90>n||90<n)&&0<k!==0<n&&(n=g((180-(k+360)%360)/((n+360)%360-(k+360)%360),0,1),b.push({i:c,lat:f[1]+n*(e[1]-f[1]),direction:0>k?1:-1,previousLonLat:f,lonLat:e}))});if(b.length)if(d){if(1===b.length%2){var m=b.slice().sort(function(a,b){return Math.abs(b.lat)-Math.abs(a.lat)})[0];t(b,m)}for(var l=b.length-2;0<=l;){var h=b[l].i,p=v(180+.000001*b[l].direction),x=v(180-.000001*b[l].direction);
h=a.splice.apply(a,c([h,b[l+1].i-h],f.greatCircle([p,b[l].lat],[p,b[l+1].lat],!0),!1));h.push.apply(h,f.greatCircle([x,b[l+1].lat],[x,b[l].lat],!0));e.push(h);l-=2}if(m)for(p=0;p<e.length;p++){l=m.direction;var k=m.lat;x=e[p];h=x.indexOf(m.lonLat);if(-1<h){p=(0>k?-1:1)*this.maxLatitude;var q=v(180+.000001*l),u=v(180-.000001*l);k=f.greatCircle([q,k],[q,p],!0);for(q+=120*l;-180<q&&180>q;q+=120*l)k.push([q,p]);k.push.apply(k,f.greatCircle([u,p],[u,m.lat],!0));x.splice.apply(x,c([h,0],k,!1));break}}}else for(l=
b.length;l--;)h=b[l].i,h=a.splice(h,a.length,[v(180+.000001*b[l].direction),b[l].lat]),h.unshift([v(180-.000001*b[l].direction),b[l].lat]),e.push(h);return e};f.prototype.path=function(b){var e=this,c=this.bounds,g=this.def,m=this.rotator,h=[],p="Polygon"===b.type||"MultiPolygon"===b.type,r=this.hasGeoProjection,x=!g||!1!==g.antimeridianCutting,k=x?m:void 0,q=x?g||this:this,u;c&&(u=[[c.x1,c.y1],[c.x2,c.y1],[c.x2,c.y2],[c.x1,c.y2]]);var I=function(b){b=b.map(function(a){if(x){k&&(a=k.forward(a));var n=
a[0];.000001>Math.abs(n-180)&&(n=180>n?179.999999:180.000001);a=[n,a[1]]}return a});var g=[b];r&&(f.insertGreatCircles(b),x&&(g=e.cutOnAntimeridian(b,p)));g.forEach(function(b){if(!(2>b.length)){var n=!1,e=!1,z=function(a){n?h.push(["L",a[0],a[1]]):(h.push(["M",a[0],a[1]]),n=!0)},D=!1,O=!1,y=b.map(function(a){a=q.forward(a);a.outside?D=!0:O=!0;Infinity===a[1]?a[1]=1E10:-Infinity===a[1]&&(a[1]=-1E10);return a});if(x){p&&y.push(y[0]);if(D){if(!O)return;if(u)if(p)y=d(y,u);else if(c){a(y,u).forEach(function(a){n=
!1;a.forEach(z)});return}}y.forEach(z)}else for(var w=0;w<y.length;w++){var g=b[w],k=y[w];if(k.outside)e=!0;else{if(p&&!l){var l=g;b.push(g);y.push(k)}e&&m&&(p&&r?f.greatCircle(m,g).forEach(function(a){return z(q.forward(a))}):n=!1);z(k);var m=g;e=!1}}}})};"LineString"===b.type?I(b.coordinates):"MultiLineString"===b.type?b.coordinates.forEach(function(a){return I(a)}):"Polygon"===b.type?(b.coordinates.forEach(function(a){return I(a)}),h.length&&h.push(["Z"])):"MultiPolygon"===b.type&&(b.coordinates.forEach(function(a){a.forEach(function(a){return I(a)})}),
h.length&&h.push(["Z"]));return h};f.registry=e;return f}()});t(f,"Maps/MapView.js",[f["Maps/MapViewOptionsDefault.js"],f["Maps/MapViewInsetsOptionsDefault.js"],f["Extensions/GeoJSON.js"],f["Core/Chart/MapChart.js"],f["Maps/MapUtilities.js"],f["Maps/Projection.js"],f["Core/Utilities.js"]],function(f,e,h,c,a,d,m){var g=this&&this.__extends||function(){var a=function(b,d){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var n in b)Object.prototype.hasOwnProperty.call(b,
n)&&(a[n]=b[n])};return a(b,d)};return function(b,d){function n(){this.constructor=b}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");a(b,d);b.prototype=null===d?Object.create(d):(n.prototype=d.prototype,new n)}}(),r=this&&this.__spreadArray||function(a,b,d){if(d||2===arguments.length)for(var n=0,e=b.length,c;n<e;n++)!c&&n in b||(c||(c=Array.prototype.slice.call(b,0,n)),c[n]=b[n]);return a.concat(c||Array.prototype.slice.call(b))},
t=h.topo2geo,p=c.maps,b=a.boundsFromPath,l=a.pointInPolygon,G=m.addEvent,F=m.clamp,K=m.fireEvent,A=m.isArray,H=m.isNumber,N=m.isObject,x=m.isString,k=m.merge,q=m.pick,u=m.relativeLength,I=function(a,b){return Math.log(400.979322/Math.max((a.x2-a.x1)/(b.width/256),(a.y2-a.y1)/(b.height/256)))/Math.log(2)},B=function(){function a(b,e){var n=this;this.allowTransformAnimation=!0;this.insets=[];this.padding=[0,0,0,0];this.eventsToUnbind=[];var c;if(!(this instanceof E)){var C=r([b.options.chart.map],(b.options.series||
[]).map(function(a){return a.mapData}),!0).map(function(a){return n.getGeoMap(a)}),g=[];C.forEach(function(a){a&&(c||(c=a["hc-recommended-mapview"]),a.bbox&&(a=a.bbox,g.push({x1:a[0],y1:a[1],x2:a[2],y2:a[3]})))});var w=g.length&&a.compositeBounds(g);if(w){var q=w.x1;var l=w.y1,h=w.x2;w=w.y2;q=180<h-q&&90<w-l?{name:"EqualEarth"}:{name:"LambertConformalConic",parallels:[l,w],rotation:[-(q+h)/2]}}this.geoMap=C[0]}this.userOptions=e||{};C=k(f,{projection:q},c,e);w=c&&c.insets;e=e&&e.insets;w&&e&&(C.insets=
a.mergeInsets(w,e));this.chart=b;this.center=C.center;this.options=C;this.projection=new d(C.projection);this.playingField=b.plotBox;this.zoom=C.zoom||0;this.createInsets();this.eventsToUnbind.push(G(b,"afterSetChartSize",function(){n.playingField=n.getField();if(void 0===n.minZoom||n.minZoom===n.zoom)n.fitToBounds(void 0,void 0,!1),!n.chart.hasRendered&&H(n.userOptions.zoom)&&(n.zoom=n.userOptions.zoom),n.userOptions.center&&k(!0,n.center,n.userOptions.center)}));this.setUpEvents()}a.mergeInsets=
function(a,b){var n=function(a){var b={};a.forEach(function(a,n){b[a&&a.id||"i".concat(n)]=a});return b},d=k(n(a),n(b));return Object.keys(d).map(function(a){return d[a]})};a.prototype.createInsets=function(){var a=this,b=this.options,d=b.insets;d&&d.forEach(function(n){n=new E(a,k(b.insetOptions,n));a.insets.push(n)})};a.prototype.fitToBounds=function(a,b,d,e){void 0===d&&(d=!0);var n=a||this.getProjectedBounds();if(n){var c=q(b,a?0:this.options.padding);b=this.getField(!1);c=A(c)?c:[c,c,c,c];this.padding=
[u(c[0],b.height),u(c[1],b.width),u(c[2],b.height),u(c[3],b.width)];this.playingField=this.getField();b=I(n,this.playingField);a||(this.minZoom=b);a=this.projection.inverse([(n.x2+n.x1)/2,(n.y2+n.y1)/2]);this.setView(a,b,d,e)}};a.prototype.getField=function(a){void 0===a&&(a=!0);a=a?this.padding:[0,0,0,0];return{x:a[3],y:a[0],width:this.chart.plotWidth-a[1]-a[3],height:this.chart.plotHeight-a[0]-a[2]}};a.prototype.getGeoMap=function(a){if(x(a))return p[a]&&"Topology"===p[a].type?t(p[a]):p[a];if(N(a,
!0)){if("FeatureCollection"===a.type)return a;if("Topology"===a.type)return t(a)}};a.prototype.getMapBBox=function(){var a=this.getProjectedBounds(),b=this.getScale();if(a){var d=this.padding,c=this.projectedUnitsToPixels({x:a.x1,y:a.y2});return{width:(a.x2-a.x1)*b+d[1]+d[3],height:(a.y2-a.y1)*b+d[0]+d[2],x:c.x-d[3],y:c.y-d[0]}}};a.prototype.getProjectedBounds=function(){var d=this.projection,c=this.chart.series.reduce(function(a,b){var d=b.getProjectedBounds&&b.getProjectedBounds();d&&!1!==b.options.affectsMapView&&
a.push(d);return a},[]),e=this.options.fitToGeometry;return e?(this.fitToGeometryCache||("MultiPoint"===e.type?(e=e.coordinates.map(function(a){return d.forward(a)}),c=e.map(function(a){return a[0]}),e=e.map(function(a){return a[1]}),this.fitToGeometryCache={x1:Math.min.apply(0,c),x2:Math.max.apply(0,c),y1:Math.min.apply(0,e),y2:Math.max.apply(0,e)}):this.fitToGeometryCache=b(d.path(e))),this.fitToGeometryCache):this.projection.bounds||a.compositeBounds(c)};a.prototype.getScale=function(){return 256/
400.979322*Math.pow(2,this.zoom)};a.prototype.getSVGTransform=function(){var a=this.playingField,b=a.x,d=a.y,c=a.width;a=a.height;var e=this.projection.forward(this.center),f=this.projection.hasCoordinates?-1:1,g=this.getScale();f*=g;return{scaleX:g,scaleY:f,translateX:b+c/2-e[0]*g,translateY:d+a/2-e[1]*f}};a.prototype.lonLatToPixels=function(a){if(a=this.lonLatToProjectedUnits(a))return this.projectedUnitsToPixels(a)};a.prototype.lonLatToProjectedUnits=function(a){var b=this.chart,d=b.mapTransforms;
if(d){for(var e in d)if(Object.hasOwnProperty.call(d,e)&&d[e].hitZone){var c=b.transformFromLatLon(a,d[e]);if(c&&l(c,d[e].hitZone.coordinates[0]))return c}return b.transformFromLatLon(a,d["default"])}d=0;for(e=this.insets;d<e.length;d++)if(b=e[d],b.options.geoBounds&&l({x:a.lon,y:a.lat},b.options.geoBounds.coordinates[0]))return a=b.projection.forward([a.lon,a.lat]),a=b.projectedUnitsToPixels({x:a[0],y:a[1]}),this.pixelsToProjectedUnits(a);a=this.projection.forward([a.lon,a.lat]);if(!a.outside)return{x:a[0],
y:a[1]}};a.prototype.projectedUnitsToLonLat=function(a){var b=this.chart,d=b.mapTransforms;if(d){for(var e in d)if(Object.hasOwnProperty.call(d,e)&&d[e].hitZone&&l(a,d[e].hitZone.coordinates[0]))return b.transformToLatLon(a,d[e]);return b.transformToLatLon(a,d["default"])}d=this.projectedUnitsToPixels(a);e=0;for(var c=this.insets;e<c.length;e++)if(b=c[e],b.hitZone&&l(d,b.hitZone.coordinates[0]))return a=b.pixelsToProjectedUnits(d),a=b.projection.inverse([a.x,a.y]),{lon:a[0],lat:a[1]};a=this.projection.inverse([a.x,
a.y]);return{lon:a[0],lat:a[1]}};a.prototype.redraw=function(a){this.chart.series.forEach(function(a){a.useMapGeometry&&(a.isDirty=!0)});this.chart.redraw(a)};a.prototype.setView=function(a,b,d,e){void 0===d&&(d=!0);a&&(this.center=a);"number"===typeof b&&("number"===typeof this.minZoom&&(b=Math.max(b,this.minZoom)),"number"===typeof this.options.maxZoom&&(b=Math.min(b,this.options.maxZoom)),H(b)&&(this.zoom=b));var c=this.getProjectedBounds();if(c){a=this.projection.forward(this.center);var f=this.playingField;
b=f.x;var n=f.y,g=f.width;f=f.height;var z=this.getScale(),k=this.projectedUnitsToPixels({x:c.x1,y:c.y1}),D=this.projectedUnitsToPixels({x:c.x2,y:c.y2});c=[(c.x1+c.x2)/2,(c.y1+c.y2)/2];if(!this.chart.series.some(function(a){return a.isDrilling})){var C=k.x,q=D.y;D=D.x;k=k.y;D-C<g?a[0]=c[0]:C<b&&D<b+g?a[0]+=Math.max(C-b,D-g-b)/z:D>b+g&&C>b&&(a[0]+=Math.min(D-g-b,C-b)/z);k-q<f?a[1]=c[1]:q<n&&k<n+f?a[1]-=Math.max(q-n,k-f-n)/z:k>n+f&&q>n&&(a[1]-=Math.min(k-f-n,q-n)/z);this.center=this.projection.inverse(a)}this.insets.forEach(function(a){a.options.field&&
(a.hitZone=a.getHitZone(),a.playingField=a.getField())});this.render()}K(this,"afterSetView");d&&this.redraw(e)};a.prototype.projectedUnitsToPixels=function(a){var b=this.getScale(),d=this.projection.forward(this.center),c=this.playingField;return{x:c.x+c.width/2-b*(d[0]-a.x),y:c.y+c.height/2+b*(d[1]-a.y)}};a.prototype.pixelsToLonLat=function(a){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(a))};a.prototype.pixelsToProjectedUnits=function(a){var b=a.x;a=a.y;var d=this.getScale(),
c=this.projection.forward(this.center),e=this.playingField;return{x:c[0]+(b-(e.x+e.width/2))/d,y:c[1]-(a-(e.y+e.height/2))/d}};a.prototype.setUpEvents=function(){var a=this,b=this.chart,d,c,e,f=function(f){var g=b.pointer.pinchDown,n=a.projection,k=b.mouseDownX,z=b.mouseDownY;1===g.length&&(k=g[0].chartX,z=g[0].chartY);if("number"===typeof k&&"number"===typeof z){var D="".concat(k,",").concat(z),w=f.originalEvent;g=w.chartX;w=w.chartY;D!==c&&(c=D,d=a.projection.forward(a.center),e=(a.projection.options.rotation||
[0,0]).slice());D=(D=n.def&&n.def.bounds)&&I(D,a.playingField)||-Infinity;"Orthographic"===n.options.name&&(a.minZoom||Infinity)<1.3*D?(n=440/(a.getScale()*Math.min(b.plotWidth,b.plotHeight)),e&&(k=(k-g)*n-e[0],z=F(-e[1]-(z-w)*n,-80,80),g=a.zoom,a.update({projection:{rotation:[-k,-z]}},!1),a.fitToBounds(void 0,void 0,!1),a.zoom=g,b.redraw(!1))):H(g)&&H(w)&&(n=a.getScale(),z=a.projection.inverse([d[0]+(k-g)/n,d[1]-(z-w)/n*(a.projection.hasCoordinates?1:-1)]),a.setView(z,void 0,!0,!1));f.preventDefault()}};
G(b,"pan",f);G(b,"touchpan",f);G(b,"selection",function(d){if(d.resetSelection)a.zoomBy();else{var c=d.x-b.plotLeft,e=d.y-b.plotTop,f=a.pixelsToProjectedUnits({x:c,y:e}),g=f.y;f=f.x;c=a.pixelsToProjectedUnits({x:c+d.width,y:e+d.height});a.fitToBounds({x1:f,y1:g,x2:c.x,y2:c.y},void 0,!0,d.originalEvent.touches?!1:void 0);/^touch/.test(d.originalEvent.type)||b.showResetZoom();d.preventDefault()}})};a.prototype.render=function(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())};
a.prototype.update=function(a,b,c){void 0===b&&(b=!0);var e=a.projection;e=e&&d.toString(e)!==d.toString(this.options.projection);var f=!1;k(!0,this.userOptions,a);k(!0,this.options,a);"insets"in a&&(this.insets.forEach(function(a){return a.destroy()}),this.insets.length=0,f=!0);(e||"fitToGeometry"in a)&&delete this.fitToGeometryCache;if(e||f)this.chart.series.forEach(function(a){var b=a.transformGroups;a.clearBounds&&a.clearBounds();a.isDirty=!0;a.isDirtyData=!0;if(f&&b)for(;1<b.length;)(a=b.pop())&&
a.destroy()}),e&&(this.projection=new d(this.options.projection)),f&&this.createInsets(),a.center||!Object.hasOwnProperty.call(a,"zoom")||H(a.zoom)||this.fitToBounds(void 0,void 0,!1);a.center||H(a.zoom)?this.setView(this.options.center,a.zoom,!1):"fitToGeometry"in a&&this.fitToBounds(void 0,void 0,!1);b&&this.chart.redraw(c)};a.prototype.zoomBy=function(a,b,d,e){var c=this.chart,f=this.projection.forward(this.center);b=b?this.projection.forward(b):[];var g=b[0],k=b[1];"number"===typeof a?(a=this.zoom+
a,b=void 0,d&&(g=d[0],k=d[1],d=this.getScale(),g=g-c.plotLeft-c.plotWidth/2,c=k-c.plotTop-c.plotHeight/2,g=f[0]+g/d,k=f[1]+c/d),"number"===typeof g&&"number"===typeof k&&(d=1-Math.pow(2,this.zoom)/Math.pow(2,a),g=f[0]-g,c=f[1]-k,f[0]-=g*d,f[1]+=c*d,b=this.projection.inverse(f)),this.setView(b,a,void 0,e)):this.fitToBounds(void 0,void 0,void 0,e)};a.compositeBounds=function(a){if(a.length)return a.slice(1).reduce(function(a,b){a.x1=Math.min(a.x1,b.x1);a.y1=Math.min(a.y1,b.y1);a.x2=Math.max(a.x2,b.x2);
a.y2=Math.max(a.y2,b.y2);return a},k(a[0]))};return a}(),E=function(a){function d(d,c){var f=a.call(this,d.chart,c)||this;f.id=c.id;f.mapView=d;f.options=k(e,c);f.allBounds=[];f.options.geoBounds&&(d=d.projection.path(f.options.geoBounds),f.geoBoundsProjectedBox=b(d),f.geoBoundsProjectedPolygon=d.map(function(a){return[a[1]||0,a[2]||0]}));return f}g(d,a);d.prototype.getField=function(b){void 0===b&&(b=!0);var d=this.hitZone;if(d){var c=b?this.padding:[0,0,0,0];d=d.coordinates[0];var e=d.map(function(a){return a[0]}),
f=d.map(function(a){return a[1]});d=Math.min.apply(0,e)+c[3];e=Math.max.apply(0,e)-c[1];var g=Math.min.apply(0,f)+c[0];c=Math.max.apply(0,f)-c[2];if(H(d)&&H(g))return{x:d,y:g,width:e-d,height:c-g}}return a.prototype.getField.call(this,b)};d.prototype.getHitZone=function(){var a=this.chart,b=this.mapView,d=this.options,c=(d.field||{}).coordinates;if(c){c=c[0];if("percent"===d.units){var e="mapBoundingBox"===d.relativeTo&&b.getMapBBox()||k(a.plotBox,{x:0,y:0});c=c.map(function(a){return[u("".concat(a[0],
"%"),e.width,e.x),u("".concat(a[1],"%"),e.height,e.y)]})}return{type:"Polygon",coordinates:[c]}}};d.prototype.getProjectedBounds=function(){return B.compositeBounds(this.allBounds)};d.prototype.isInside=function(a){var b=this.geoBoundsProjectedBox,d=this.geoBoundsProjectedPolygon;return!!(b&&a.x>=b.x1&&a.x<=b.x2&&a.y>=b.y1&&a.y<=b.y2&&d&&l(a,d))};d.prototype.render=function(){var a=this.chart,b=this.mapView,d=this.options,c=d.borderPath||d.field;if(c&&b.group){var e=!0;this.border||(this.border=a.renderer.path().addClass("highcharts-mapview-inset-border").add(b.group),
e=!1);a.styledMode||this.border.attr({stroke:d.borderColor,"stroke-width":d.borderWidth});var f=Math.round(this.border.strokeWidth())%2/2,g="mapBoundingBox"===d.relativeTo&&b.getMapBBox()||b.playingField;b=(c.coordinates||[]).reduce(function(b,c){return c.reduce(function(b,c,e){var k=c[0];c=c[1];"percent"===d.units&&(k=a.plotLeft+u("".concat(k,"%"),g.width,g.x),c=a.plotTop+u("".concat(c,"%"),g.height,g.y));k=Math.floor(k)+f;c=Math.floor(c)+f;b.push(0===e?["M",k,c]:["L",k,c]);return b},b)},[]);this.border[e?
"animate":"attr"]({d:b})}};d.prototype.destroy=function(){this.border&&(this.border=this.border.destroy());this.eventsToUnbind.forEach(function(a){return a()})};d.prototype.setUpEvents=function(){};return d}(B);G(c,"afterInit",function(){this.mapView=new B(this,this.options.mapView)});return B});t(f,"Series/Map/MapSeries.js",[f["Core/Animation/AnimationUtilities.js"],f["Series/ColorMapComposition.js"],f["Series/CenteredUtilities.js"],f["Core/Globals.js"],f["Core/Chart/MapChart.js"],f["Series/Map/MapPoint.js"],
f["Maps/MapView.js"],f["Core/Series/Series.js"],f["Core/Series/SeriesRegistry.js"],f["Core/Renderer/SVG/SVGRenderer.js"],f["Core/Utilities.js"]],function(f,e,h,c,a,d,m,t,r,v,p){var b=this&&this.__extends||function(){var a=function(b,d){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])};return a(b,d)};return function(b,d){function c(){this.constructor=b}if("function"!==typeof d&&
null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}(),g=f.animObject;f=c.noop;var G=a.splitPath;a=r.seriesTypes;var F=a.column,K=a.scatter;a=p.extend;var A=p.find,H=p.fireEvent,N=p.getNestedProperty,x=p.isArray,k=p.defined,q=p.isNumber,u=p.isObject,I=p.merge,B=p.objectEach,E=p.pick,L=p.splat;p=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b.chart=void 0;
b.data=void 0;b.group=void 0;b.joinBy=void 0;b.options=void 0;b.points=void 0;b.processedData=[];return b}b(e,a);e.prototype.animate=function(a){var b=this.chart,d=this.group,c=g(this.options.animation);a?d.attr({translateX:b.plotLeft+b.plotWidth/2,translateY:b.plotTop+b.plotHeight/2,scaleX:.001,scaleY:.001}):d.animate({translateX:b.plotLeft,translateY:b.plotTop,scaleX:1,scaleY:1},c)};e.prototype.clearBounds=function(){this.points.forEach(function(a){delete a.bounds;delete a.insetIndex;delete a.projectedPath});
delete this.bounds};e.prototype.doFullTranslate=function(){return!(!this.isDirtyData&&!this.chart.isResizing&&this.hasRendered)};e.prototype.drawMapDataLabels=function(){t.prototype.drawDataLabels.call(this);this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)};e.prototype.drawPoints=function(){var a=this,b=this,d=this.chart,c=this.group,e=this.transformGroups,f=void 0===e?[]:e,g=d.mapView,k=d.renderer;g&&(this.transformGroups=f,f[0]||(f[0]=k.g().add(c)),g.insets.forEach(function(a,
b){f[b+1]||f.push(k.g().add(c))}),this.doFullTranslate()&&(this.points.forEach(function(b){var c=b.graphic,e=b.shapeArgs;b.group=f["number"===typeof b.insetIndex?b.insetIndex+1:0];c&&c.parentGroup!==b.group&&c.add(b.group);e&&d.hasRendered&&!d.styledMode&&(e.fill=a.pointAttribs(b,b.state).fill)}),F.prototype.drawPoints.apply(this),this.points.forEach(function(c){var e=c.graphic;if(e){var f=e.animate,g="";c.name&&(g+="highcharts-name-"+c.name.replace(/ /g,"-").toLowerCase());c.properties&&c.properties["hc-key"]&&
(g+=" highcharts-key-"+c.properties["hc-key"].toString().toLowerCase());g&&e.addClass(g);d.styledMode&&e.css(a.pointAttribs(c,c.selected&&"select"||void 0));e.animate=function(a,c,g){var k=q(a["stroke-width"])&&!q(e["stroke-width"]),n=q(e["stroke-width"])&&!q(a["stroke-width"]);if(k||n){var h=E(b.getStrokeWidth(b.options),1)/(d.mapView&&d.mapView.getScale()||1);k&&(e["stroke-width"]=h);n&&(a["stroke-width"]=h)}return f.call(e,a,c,n?function(){e.element.removeAttribute("stroke-width");delete e["stroke-width"];
g&&g.apply(this,arguments)}:g)}}})),f.forEach(function(c,e){var f=(0===e?g:g.insets[e-1]).getSVGTransform(),q=E(a.getStrokeWidth(a.options),1),n=f.scaleX,h=0<f.scaleY?1:-1,l=function(d){(b.points||[]).forEach(function(b){var c=b.graphic,e;c&&c["stroke-width"]&&(e=a.getStrokeWidth(b.options))&&c.attr({"stroke-width":e/d})})};if(k.globalAnimation&&d.hasRendered&&g.allowTransformAnimation){var m=Number(c.attr("translateX")),w=Number(c.attr("translateY")),u=Number(c.attr("scaleX")),D=function(a,b){a=
u+(n-u)*b.pos;c.attr({translateX:m+(f.translateX-m)*b.pos,translateY:w+(f.translateY-w)*b.pos,scaleX:a,scaleY:a*h,"stroke-width":q/a});l(a)};e={};d.options.chart&&(e=I({},d.options.chart.animation));if("boolean"!==typeof e){var z=e.step;e.step=function(a){z&&z.apply(this,arguments);D.apply(this,arguments)}}c.attr({animator:0}).animate({animator:1},e,function(){"boolean"!==typeof k.globalAnimation&&k.globalAnimation.complete&&k.globalAnimation.complete({applyDrilldown:!0})})}else c.attr(I(f,{"stroke-width":q/
n})),l(n)}),this.isDrilling||this.drawMapDataLabels())};e.prototype.getProjectedBounds=function(){if(!this.bounds&&this.chart.mapView){var a=this.chart.mapView,b=a.insets,d=a.projection,c=[];(this.points||[]).forEach(function(a){if(a.path||a.geometry){"string"===typeof a.path?a.path=G(a.path):x(a.path)&&"M"===a.path[0]&&(a.path=v.prototype.pathToSegments(a.path));if(!a.bounds){var e=a.getProjectedBounds(d);if(e){a.labelrank=E(a.labelrank,(e.x2-e.x1)*(e.y2-e.y1));var f=e.midX,g=e.midY;if(b&&q(f)&&
q(g)){var k=A(b,function(a){return a.isInside({x:f,y:g})});k&&(delete a.projectedPath,(e=a.getProjectedBounds(k.projection))&&k.allBounds.push(e),a.insetIndex=b.indexOf(k))}a.bounds=e}}a.bounds&&void 0===a.insetIndex&&c.push(a.bounds)}});this.bounds=m.compositeBounds(c)}return this.bounds};e.prototype.getStrokeWidth=function(a){var b=this.pointAttrToOptions;return a[b&&b["stroke-width"]||"borderWidth"]};e.prototype.hasData=function(){return!!this.processedXData.length};e.prototype.pointAttribs=function(a,
b){var d,c=a.series.chart,e=c.mapView;c=c.styledMode?this.colorAttribs(a):F.prototype.pointAttribs.call(this,a,b);var f=this.getStrokeWidth(a.options);if(b){b=I(this.options.states[b],a.options.states&&a.options.states[b]||{});var g=this.getStrokeWidth(b);k(g)&&(f=g);c.stroke=null!==(d=b.borderColor)&&void 0!==d?d:a.color}f&&e&&(f/=e.getScale());d=this.getStrokeWidth(this.options);c.dashstyle&&e&&q(d)&&(f=d/e.getScale());a.visible||(c.fill=this.options.nullColor);k(f)?c["stroke-width"]=f:delete c["stroke-width"];
c["stroke-linecap"]=c["stroke-linejoin"]=this.options.linecap;return c};e.prototype.updateData=function(){return this.processedData?!1:a.prototype.updateData.apply(this,arguments)};e.prototype.setData=function(b,d,c,e){void 0===d&&(d=!0);delete this.bounds;a.prototype.setData.call(this,b,!1,void 0,e);this.processData();this.generatePoints();d&&this.chart.redraw(c)};e.prototype.processData=function(){var a=this.options,b=a.data,e=this.chart.options.chart,f=this.joinBy,g=a.keys||this.pointArrayMap,
k=[],n={},h=this.chart.mapView;h=h&&(u(a.mapData,!0)?h.getGeoMap(a.mapData):h.geoMap);var l=this.chart.mapTransforms;(this.chart.mapTransforms=l=e.mapTransforms||h&&h["hc-transform"]||l)&&B(l,function(a){a.rotation&&(a.cosAngle=Math.cos(a.rotation),a.sinAngle=Math.sin(a.rotation))});if(x(a.mapData))var m=a.mapData;else h&&"FeatureCollection"===h.type&&(this.mapTitle=h.title,m=c.geojson(h,this.type,this));var p=this.processedData=[];b&&b.forEach(function(c,e){var k=0;if(q(c))p[e]={value:c};else if(x(c)){p[e]=
{};!a.keys&&c.length>g.length&&"string"===typeof c[0]&&(p[e]["hc-key"]=c[0],++k);for(var h=0;h<g.length;++h,++k)g[h]&&"undefined"!==typeof c[k]&&(0<g[h].indexOf(".")?d.prototype.setNestedProperty(p[e],c[k],g[h]):p[e][g[h]]=c[k])}else p[e]=b[e];f&&"_i"===f[0]&&(p[e]._i=e)});if(m){this.mapData=m;this.mapMap={};for(l=0;l<m.length;l++)e=m[l],h=e.properties,e._i=l,f[0]&&h&&h[f[0]]&&(e[f[0]]=h[f[0]]),n[e[f[0]]]=e;this.mapMap=n;if(f[1]){var E=f[1];p.forEach(function(a){a=N(E,a);n[a]&&k.push(n[a])})}if(a.allAreas){if(f[1]){var L=
f[1];p.forEach(function(a){k.push(N(L,a))})}var C="|"+k.map(function(a){return a&&a[f[0]]}).join("|")+"|";m.forEach(function(a){f[0]&&-1!==C.indexOf("|"+a[f[0]]+"|")||p.push(I(a,{value:null}))})}}this.processedXData=Array(p.length)};e.prototype.setOptions=function(a){a=t.prototype.setOptions.call(this,a);var b=a.joinBy;null===b&&(b="_i");b=this.joinBy=L(b);b[1]||(b[1]=b[0]);return a};e.prototype.translate=function(){var a=this.doFullTranslate(),b=this.chart.mapView,c=b&&b.projection;!this.chart.hasRendered||
!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints(),delete this.bounds,!b||b.userOptions.center||q(b.userOptions.zoom)||b.zoom!==b.minZoom?this.getProjectedBounds():b.fitToBounds(void 0,void 0,!1));if(b){var e=b.getSVGTransform();this.points.forEach(function(f){var g=q(f.insetIndex)&&b.insets[f.insetIndex].getSVGTransform()||e;g&&f.bounds&&q(f.bounds.midX)&&q(f.bounds.midY)&&(f.plotX=f.bounds.midX*g.scaleX+g.translateX,f.plotY=f.bounds.midY*g.scaleY+g.translateY);a&&(f.shapeType=
"path",f.shapeArgs={d:d.getProjectedPath(f,c)});f.projectedPath&&!f.projectedPath.length?f.setVisible(!1):f.setVisible(!0)})}H(this,"afterTranslate")};e.defaultOptions=I(K.defaultOptions,{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){var a=this.series.chart.numberFormatter,b=this.point.value;return q(b)?a(b,-1):""},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},
turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"});return e}(K);a(p.prototype,{type:"map",axisTypes:e.seriesMembers.axisTypes,colorAttribs:e.seriesMembers.colorAttribs,colorKey:e.seriesMembers.colorKey,directTouch:!0,drawDataLabels:f,drawGraph:f,forceDL:!0,getCenter:h.getCenter,getExtremesFromAll:!0,getSymbol:f,isCartesian:!1,parallelArrays:e.seriesMembers.parallelArrays,
pointArrayMap:e.seriesMembers.pointArrayMap,pointClass:d,preserveAspectRatio:!0,searchPoint:f,trackerGroups:e.seriesMembers.trackerGroups,useMapGeometry:!0});e.compose(p);r.registerSeriesType("map",p);"";return p});t(f,"Series/FlowMap/FlowMapSeries.js",[f["Series/FlowMap/FlowMapPoint.js"],f["Series/Map/MapSeries.js"],f["Core/Series/SeriesRegistry.js"],f["Core/Utilities.js"]],function(f,e,h,c){var a=this&&this.__extends||function(){var a=function(b,d){a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])};return a(b,d)};return function(b,d){function c(){this.constructor=b}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}(),d=this&&this.__spreadArray||function(a,b,d){if(d||2===arguments.length)for(var c=0,e=b.length,f;c<e;c++)!f&&c in
b||(f||(f=Array.prototype.slice.call(b,0,c)),f[c]=b[c]);return a.concat(f||Array.prototype.slice.call(b))},g=h.series.prototype.pointClass,t=h.seriesTypes,r=t.column,v=t.mapline,p=c.addEvent,b=c.arrayMax,l=c.arrayMin,G=c.defined;t=c.extend;var F=c.isArray,K=c.merge,A=c.pick,H=c.relativeLength;c=function(c){function f(){var a=null!==c&&c.apply(this,arguments)||this;a.data=void 0;a.options=void 0;a.points=void 0;a.smallestWeight=void 0;a.greatestWeight=void 0;a.centerOfPoints=void 0;return a}a(f,c);
f.getLength=function(a,b){return Math.sqrt(a*a+b*b)};f.normalize=function(a,b){var d=this.getLength(a,b);return[a/d,b/d]};f.markerEndPath=function(a,b,d,c){var e=H(c.width||0,this.getLength(b[0]-a[0],b[1]-a[1])),f=c.markerType||"arrow",g=this.normalize(b[0]-a[0],b[1]-a[1]);c=g[0];g=g[1];var k=[];if("arrow"===f){var h=a[0],l=a[1];k.push(["L",h-c*e,l-g*e]);k.push(["L",d[0],d[1]]);h=b[0];l=b[1];k.push(["L",h+c*e,l+g*e])}if("mushroom"===f){f=a[0];a=a[1];h=b[0];b=b[1];var m=(h-f)/2+f;l=(b-a)/2+a;m=2*(d[0]-
m)+m;d=2*(d[1]-l)+l;k.push(["L",f-c*e,a-g*e]);k.push(["Q",m,d,h+c*e,b+g*e])}return k};f.prototype.animate=function(a){var b=this.points;a||b.forEach(function(a){if(a.shapeArgs&&F(a.shapeArgs.d)&&a.shapeArgs.d.length){var b=a.shapeArgs.d,c=b[0][1],e=b[0][2];if(c&&e){for(var f=[],g=0;g<b.length;g++){f.push(d([],b[g],!0));for(var k=1;k<b[g].length;k++)f[g][k]=k%2?c:e}a.graphic&&(a.graphic.attr({d:f}),a.graphic.animate({d:b}))}}})};f.prototype.getLinkWidth=function(a){var b=this.options.width,d=a.options.weight||
this.options.weight;a.options.weight=d;if(b&&!d)return b;a=this.smallestWeight;b=this.greatestWeight;if(!G(d)||!a||!b)return 0;var c=this.options.minWidth;return(d-a)*(this.options.maxWidth-c)/(b-a||1)+c};f.prototype.autoCurve=function(a,b,d,c,e,f){var g=d-a,k=c-b;a=(d-a)/2+a-e;b=(c-b)/2+b-f;g=Math.atan2(g*b-k*a,g*a+k*b);g=180*g/Math.PI;0>g&&(g=360+g);g=g*Math.PI/180;return.7*-Math.sin(g)};f.prototype.pointAttribs=function(a,b){b=e.prototype.pointAttribs.call(this,a,b);b.fill=A(a.options.fillColor,
a.options.color,"none"===this.options.fillColor?null:this.options.fillColor,this.color);b["fill-opacity"]=A(a.options.fillOpacity,this.options.fillOpacity);b["stroke-width"]=A(a.options.lineWidth,this.options.lineWidth,1);a.options.opacity&&(b.opacity=a.options.opacity);return b};f.prototype.translate=function(){var a=this;!this.chart.hasRendered||!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints());var d=[],c=0,e=0;this.points.forEach(function(b){var f=a.chart,h=f.mapView,
k=b.options,l=function(){b.series.isDirty=!0},m=function(a){a=f.get(a);if(a instanceof g&&a.plotX&&a.plotY)return p(a,"update",l),{x:a.plotX,y:a.plotY}},q=function(a){return F(a)?{lon:a[0],lat:a[1]}:a},u,B;"string"===typeof k.from?u=m(k.from):"object"===typeof k.from&&h&&(u=h.lonLatToPixels(q(k.from)));"string"===typeof k.to?B=m(k.to):"object"===typeof k.to&&h&&(B=h.lonLatToPixels(q(k.to)));b.fromPos=u;b.toPos=B;u&&B&&(c+=(u.x+B.x)/2,e+=(u.y+B.y)/2);A(b.options.weight,a.options.weight)&&d.push(A(b.options.weight,
a.options.weight))});this.smallestWeight=l(d);this.greatestWeight=b(d);this.centerOfPoints={x:c/this.points.length,y:e/this.points.length};this.points.forEach(function(b){a.getLinkWidth(b)?(b.fromPos&&(b.plotX=b.fromPos.x,b.plotY=b.fromPos.y),b.shapeType="path",b.shapeArgs=a.getPointShapeArgs(b),b.color=A(b.options.color,b.series.color)):b.shapeArgs={d:[]}})};f.prototype.getPointShapeArgs=function(a){var b,c=a.fromPos,e=a.toPos;if(!c||!e)return{};var g=this.getLinkWidth(a)/2,h=a.options,k=K(this.options.markerEnd,
h.markerEnd),l=A(h.growTowards,this.options.growTowards),m=c.x||0,p=c.y||0;c=e.x||0;var r=e.y||0;h=A(h.curveFactor,this.options.curveFactor);var t=k&&k.enabled&&k.height||0;G(h)||(h=this.autoCurve(m,p,c,r,this.centerOfPoints.x,this.centerOfPoints.y));if(t){t=H(t,4*g);var y=.5*(c-m);var w=.5*(r-p);var v=m+y;w=f.normalize(v+w*h-c,p+w+-y*h-r);v=w[1];c+=w[0]*t;r+=v*t}y=.5*(c-m);var x=.5*(r-p);var F=m+y,J=p+x;v=y;y=x;x=-v;w=f.normalize(y,x);t=w[0];w=w[1];v=1+.25*Math.sqrt(h*h);t*=g*v;w*=g*v;y=F+y*h;h=
J+x*h;v=f.normalize(y-m,h-p);x=v[0];F=v[1];v=x;x=F*g;F=-v*g;v=f.normalize(y-c,h-r);J=v[0];var M=v[1];v=J;J=-M*g;M=v*g;l&&(x/=g,F/=g,t/=4,w/=4);g={d:[["M",m-x,p-F],["Q",y-t,h-w,c-J,r-M],["L",c+J,r+M],["Q",y+t,h+w,m+x,p+F],["Z"]]};k&&k.enabled&&g.d&&(e=f.markerEndPath([c-J,r-M],[c+J,r+M],[e.x,e.y],k),(b=g.d).splice.apply(b,d([2,0],e,!1)));k=a.options.from;e=a.options.to;b=k.lat;k=k.lon;l=e.lat;e=e.lon;b&&k&&(a.options.from="".concat(+b,", ").concat(+k));l&&e&&(a.options.to="".concat(+l,", ").concat(+e));
return g};f.defaultOptions=K(v.defaultOptions,{animation:!0,dataLabels:{enabled:!1},fillOpacity:.5,markerEnd:{enabled:!0,height:"40%",width:"40%",markerType:"arrow"},width:1,maxWidth:25,minWidth:5,lineWidth:void 0,tooltip:{headerFormat:'<span style="font-size: 0.8em">{series.name}</span><br/>',pointFormat:"{point.options.from} \u2192 {point.options.to}: <b>{point.options.weight}</b>"}});return f}(v);t(c.prototype,{pointClass:f,pointArrayMap:["from","to","weight"],drawPoints:r.prototype.drawPoints,
useMapGeometry:!0});h.registerSeriesType("flowmap",c);"";return c});t(f,"masters/modules/flowmap.src.js",[],function(){})});
//# sourceMappingURL=flowmap.js.map
/*
 Highcharts JS v11.0.1 (2023-05-08)

 (c) 2009-2021 Torstein Honsi

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts"],function(v){a(v);a.Highcharts=v;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function v(a,e,C,m){a.hasOwnProperty(e)||(a[e]=m.apply(null,C),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:a[e]}})))}a=a?
a._modules:{};v(a,"Extensions/SeriesLabel/SeriesLabelDefaults.js",[],function(){return{enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]}});v(a,"Extensions/SeriesLabel/SeriesLabelUtilities.js",[],function(){function a(a,m,e,y,h,t){a=(t-m)*(e-a)-(y-m)*(h-a);return 0<a?!0:!(0>a)}function e(C,m,e,y,h,t,A,B){return a(C,m,h,t,A,B)!==a(e,y,h,t,A,B)&&
a(C,m,e,y,h,t)!==a(C,m,e,y,A,B)}return{boxIntersectLine:function(a,m,v,y,h,t,A,B){return e(a,m,a+v,m,h,t,A,B)||e(a+v,m,a+v,m+y,h,t,A,B)||e(a,m+y,a+v,m+y,h,t,A,B)||e(a,m,a,m+y,h,t,A,B)},intersectRect:function(a,m){return!(m.left>a.right||m.right<a.left||m.top>a.bottom||m.bottom<a.top)}}});v(a,"Extensions/SeriesLabel/SeriesLabel.js",[a["Core/Animation/AnimationUtilities.js"],a["Core/Chart/Chart.js"],a["Core/FormatUtilities.js"],a["Core/Defaults.js"],a["Extensions/SeriesLabel/SeriesLabelDefaults.js"],
a["Extensions/SeriesLabel/SeriesLabelUtilities.js"],a["Core/Utilities.js"]],function(a,e,v,m,N,y,h){function t(z,a,x,b,g){var f=z.chart,k=z.options.label||{},c=D(k.onArea,!!z.area),l=c||k.connectorAllowed,d=f.boxesToAvoid,E=Number.MAX_VALUE,m=Number.MAX_VALUE,p,h,u;for(u=0;d&&u<d.length;u+=1)if(O(d[u],{left:a,right:a+b.width,top:x,bottom:x+b.height}))return!1;for(u=0;u<f.series.length;u+=1){var n=f.series[u];d=n.interpolatedPoints&&P([],n.interpolatedPoints,!0);if(n.visible&&d){var q=f.plotHeight/
10;for(h=f.plotTop;h<=f.plotTop+f.plotHeight;h+=q)d.unshift({chartX:f.plotLeft,chartY:h}),d.push({chartX:f.plotLeft+f.plotWidth,chartY:h});for(q=1;q<d.length;q+=1){if(d[q].chartX>=a-16&&d[q-1].chartX<=a+b.width+16){if(I(a,x,b.width,b.height,d[q-1].chartX,d[q-1].chartY,d[q].chartX,d[q].chartY))return!1;z===n&&!p&&g&&(p=I(a-16,x-16,b.width+32,b.height+32,d[q-1].chartX,d[q-1].chartY,d[q].chartX,d[q].chartY))}if((l||p)&&(z!==n||c)){h=a+b.width/2-d[q].chartX;var e=x+b.height/2-d[q].chartY;E=Math.min(E,
h*h+e*e)}}if(!c&&l&&z===n&&(g&&!p||E<Math.pow(k.connectorNeighbourDistance||1,2))){for(q=1;q<d.length;q+=1)if(p=Math.min(Math.pow(a+b.width/2-d[q].chartX,2)+Math.pow(x+b.height/2-d[q].chartY,2),Math.pow(a-d[q].chartX,2)+Math.pow(x-d[q].chartY,2),Math.pow(a+b.width-d[q].chartX,2)+Math.pow(x-d[q].chartY,2),Math.pow(a+b.width-d[q].chartX,2)+Math.pow(x+b.height-d[q].chartY,2),Math.pow(a-d[q].chartX,2)+Math.pow(x+b.height-d[q].chartY,2)),p<m){m=p;var t=d[q]}p=!0}}}return!g||p?{x:a,y:x,weight:E-(t?m:0),
connectorPoint:t}:!1}function A(a){a.boxesToAvoid=[];var c=a.labelSeries||[],z=a.boxesToAvoid;a.series.forEach(function(b){return(b.points||[]).forEach(function(a){return(a.dataLabels||[]).forEach(function(a){var g=a.getBBox(),f=a.translateX+(b.xAxis?b.xAxis.pos:b.chart.plotLeft);a=a.translateY+(b.yAxis?b.yAxis.pos:b.chart.plotTop);z.push({left:f,top:a,right:f+g.width,bottom:a+g.height})})})});c.forEach(function(b){var a=b.options.label||{};b.interpolatedPoints=B(b);z.push.apply(z,a.boxesToAvoid||
[])});a.series.forEach(function(b){function g(b,a,c){var d=Math.max(x,D(y,-Infinity)),f=Math.min(x+h,D(A,Infinity));return b>d&&b<=f-c.width&&a>=p&&a<=p+m-c.height}var f=b.options.label;if(f&&(b.xAxis||b.yAxis)){var k="highcharts-color-"+D(b.colorIndex,"none"),z=!b.labelBySeries,l=f.minFontSize,d=f.maxFontSize,c=a.inverted,x=c?b.yAxis.pos:b.xAxis.pos,p=c?b.xAxis.pos:b.yAxis.pos,h=a.inverted?b.yAxis.len:b.xAxis.len,m=a.inverted?b.xAxis.len:b.yAxis.len,n=b.interpolatedPoints,q=D(f.onArea,!!b.area),
e=[],v=b.xData||[],r,w=b.labelBySeries;if(q&&!c){c=[b.xAxis.toPixels(v[0]),b.xAxis.toPixels(v[v.length-1])];var y=Math.min.apply(Math,c);var A=Math.max.apply(Math,c)}if(b.visible&&!b.boosted&&n){w||(w=b.name,"string"===typeof f.format?w=Q(f.format,b,a):f.formatter&&(w=f.formatter.call(b)),b.labelBySeries=w=a.renderer.label(w,0,0,"connector",0,0,f.useHTML).addClass("highcharts-series-label highcharts-series-label-"+b.index+" "+(b.options.className||"")+" "+k),a.renderer.styledMode||(k="string"===typeof b.color?
b.color:"#666666",w.css(J({color:q?a.renderer.getContrast(k):k},f.style||{})),w.attr({opacity:a.renderer.forExport?1:0,stroke:b.color,"stroke-width":1})),l&&d&&w.css({fontSize:l+(b.sum||0)/(b.chart.labelSeriesMaxSum||0)*(d-l)+"px"}),w.attr({padding:0,zIndex:3}).add());l=w.getBBox();l.width=Math.round(l.width);for(c=n.length-1;0<c;--c)q?(d=n[c].chartX-l.width/2,k=(n[c].chartCenterY||0)-l.height/2,g(d,k,l)&&(r=t(b,d,k,l))):(d=n[c].chartX+3,k=n[c].chartY-l.height-3,g(d,k,l)&&(r=t(b,d,k,l,!0)),r&&e.push(r),
d=n[c].chartX+3,k=n[c].chartY+3,g(d,k,l)&&(r=t(b,d,k,l,!0)),r&&e.push(r),d=n[c].chartX-l.width-3,k=n[c].chartY+3,g(d,k,l)&&(r=t(b,d,k,l,!0)),r&&e.push(r),d=n[c].chartX-l.width-3,k=n[c].chartY-l.height-3,g(d,k,l)&&(r=t(b,d,k,l,!0))),r&&e.push(r);if(f.connectorAllowed&&!e.length&&!q)for(d=x+h-l.width;d>=x;d-=16)for(k=p;k<p+m-l.height;k+=16)(r=t(b,d,k,l,!0))&&e.push(r);if(e.length){if(e.sort(function(b,a){return a.weight-b.weight}),r=e[0],(a.boxesToAvoid||[]).push({left:r.x,right:r.x+l.width,top:r.y,
bottom:r.y+l.height}),(n=Math.sqrt(Math.pow(Math.abs(r.x-(w.x||0)),2)+Math.pow(Math.abs(r.y-(w.y||0)),2)))&&b.labelBySeries&&(e={opacity:a.renderer.forExport?1:0,x:r.x,y:r.y},f={opacity:1},10>=n&&(f={x:e.x,y:e.y},e={}),n=void 0,z&&(n=G(b.options.animation),n.duration*=.2),b.labelBySeries.attr(J(e,{anchorX:r.connectorPoint&&(r.connectorPoint.plotX||0)+x,anchorY:r.connectorPoint&&(r.connectorPoint.plotY||0)+p})).animate(f,n),b.options.kdNow=!0,b.buildKDTree(),b=b.searchPoint({chartX:r.x,chartY:r.y},
!0)))w.closest=[b,r.x-(b.plotX||0),r.y-(b.plotY||0)]}else w&&(b.labelBySeries=w.destroy())}else w&&(b.labelBySeries=w.destroy())}});R(a,"afterDrawSeriesLabels")}function B(a){function c(a){var c=Math.round((a.plotX||0)/8)+","+Math.round((a.plotY||0)/8);z[c]||(z[c]=1,b.push(a))}if(a.xAxis||a.yAxis){var e=a.points,b=[],g=a.graph||a.area,f=g&&g.element,k=a.chart.inverted,h=a.xAxis,l=a.yAxis,d=k?l.pos:h.pos;k=k?h.pos:l.pos;h=D((a.options.label||{}).onArea,!!a.area);var m=l.getThreshold(a.options.threshold),
z={};if(a.getPointSpline&&f&&f.getPointAtLength&&!h&&e.length<(a.chart.plotSizeX||0)/16){h=g.toD&&g.attr("d");g.toD&&g.attr({d:g.toD});l=f.getTotalLength();for(a=0;a<l;a+=16)m=f.getPointAtLength(a),c({chartX:d+m.x,chartY:k+m.y,plotX:m.x,plotY:m.y});h&&g.attr({d:h});var p=e[e.length-1];c({chartX:d+(p.plotX||0),chartY:k+(p.plotY||0)})}else for(l=e.length,g=void 0,a=0;a<l;a+=1){p=e[a];f=p.plotX;var t=p.plotY;var u=p.plotHigh;if(F(f)&&F(t)){var n={plotX:f,plotY:t,chartX:d+f,chartY:k+t};h&&(u&&(n.plotY=
u,n.chartY=k+u),n.chartCenterY=k+((u?u:t)+D(p.yBottom,m))/2);if(g&&(p=Math.abs(n.chartX-g.chartX),u=Math.abs(n.chartY-g.chartY),p=Math.max(p,u),16<p))for(p=Math.ceil(p/16),u=1;u<p;u+=1)c({chartX:g.chartX+u/p*(n.chartX-g.chartX),chartY:g.chartY+u/p*(n.chartY-g.chartY),chartCenterY:(g.chartCenterY||0)+u/p*((n.chartCenterY||0)-(g.chartCenterY||0)),plotX:(g.plotX||0)+u/p*(f-(g.plotX||0)),plotY:(g.plotY||0)+u/p*(t-(g.plotY||0))});c(n);g=n}}return b}}function C(a){if(this.renderer){var c=this,e=G(c.renderer.globalAnimation).duration;
c.labelSeries=[];c.labelSeriesMaxSum=0;c.seriesLabelTimer&&h.clearTimeout(c.seriesLabelTimer);c.series.forEach(function(b){var g=b.options.label||{},f=b.labelBySeries,k=f&&f.closest;g.enabled&&b.visible&&(b.graph||b.area)&&!b.boosted&&c.labelSeries&&(c.labelSeries.push(b),g.minFontSize&&g.maxFontSize&&b.yData&&(b.sum=b.yData.reduce(function(a,b){return(a||0)+(b||0)},0),c.labelSeriesMaxSum=Math.max(c.labelSeriesMaxSum||0,b.sum||0)),"load"===a.type&&(e=Math.max(e,G(b.options.animation).duration)),k&&
("undefined"!==typeof k[0].plotX?f.animate({x:k[0].plotX+k[1],y:k[0].plotY+k[2]}):f.attr({opacity:0})))});c.seriesLabelTimer=S(function(){c.series&&c.labelSeries&&A(c)},c.renderer.forExport||!e?0:e)}}function M(a,c,e,b,g){var f=g&&g.anchorX;g=g&&g.anchorY;var k=e/2;if(F(f)&&F(g)){var h=[["M",f,g]];var l=c-g;0>l&&(l=-b-l);l<e&&(k=f<a+e/2?l:e-l);g>c+b?h.push(["L",a+k,c+b]):g<c?h.push(["L",a+k,c]):f<a?h.push(["L",a,c+b/2]):f>a+e&&h.push(["L",a+e,c+b/2])}return h||[]}var P=this&&this.__spreadArray||function(a,
c,e){if(e||2===arguments.length)for(var b=0,g=c.length,f;b<g;b++)!f&&b in c||(f||(f=Array.prototype.slice.call(c,0,b)),f[b]=c[b]);return a.concat(f||Array.prototype.slice.call(c))},G=a.animObject,Q=v.format,K=m.setOptions,I=y.boxIntersectLine,O=y.intersectRect,L=h.addEvent,J=h.extend,R=h.fireEvent,F=h.isNumber,D=h.pick,S=h.syncTimeout,H=[];"";return{compose:function(a,c){h.pushUnique(H,a)&&(L(e,"load",C),L(e,"redraw",C));h.pushUnique(H,c)&&(c.prototype.symbols.connector=M);h.pushUnique(H,K)&&K({plotOptions:{series:{label:N}}})}}});
v(a,"masters/modules/series-label.src.js",[a["Core/Globals.js"],a["Extensions/SeriesLabel/SeriesLabel.js"]],function(a,e){e.compose(a.Chart,a.SVGRenderer)})});
//# sourceMappingURL=series-label.js.map
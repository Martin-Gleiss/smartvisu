/**
* -----------------------------------------------------------------------------
* @package     smartVISU
* @author      Martin Glei√ü
* @copyright   2012 - 2015
* @license     GPL [http://www.gnu.de]
* -----------------------------------------------------------------------------
*/


/**
* Displays the current weather at location
*
* @param {id} unique id for this widget
* @param {text=} location as string (optional)
* @param {duration=15i} the refresh interval for this widget using relative time format (optional, default 15i = 15 minutes)
*
* @info based on jDigiClock by Radoslav Dimov
* @link http://www.radoslavdimov.com
*/
{% macro current(id, location, repeat) %}
	{% set uid = uid(page, id) %}

	{% if once('digiweather') %}
		<link rel="stylesheet" type="text/css" href="lib/weather/jdigiweather.css" />
	{% endif %}

	<div class="center">
		<div id="{{ uid }}-weather" class="weather" data-widget="weather.current" data-repeat="{{ repeat|default('15i') }}"
			data-service-url="lib/weather/service/{{ config_weather_service|url_encode }}.php" data-location="{{ location|default(config_weather_location)|url_encode }}">
			<div class="humi"></div>
			<div class="wind"></div>
			<div class="temp"></div>
			<div class="city"></div>
			<div class="cond"></div>
		</div>
	</div>
{% endmacro %}


/**
* Displays the forecast weather of one day at location
*
* @param {id} unique id for this widget
* @param {text=} location as string (optional)
* @param {value=1} offset: 1 for tomorrow (default), 2 the day after tomorrow, ... (optional, default 1)
* @param {duration=3h} the refresh interval for this widget using relative time format (optional, default 3h)
*
* @info based on jDigiClock by Radoslav Dimov
* @link http://www.radoslavdimov.com
*/
{% macro forecast(id, location, day, repeat) %}
	{% set uid = uid(page, id) %}

	{% if once('digiweather') %}
		<link rel="stylesheet" type="text/css" href="lib/weather/jdigiweather.css" />
	{% endif %}

	<div class="center">
		<div id="{{ uid }}-forecast" class="forecast" data-widget="weather.forecast" data-repeat="{{ repeat|default('3h') }}"
			data-service-url="lib/weather/service/{{ config_weather_service|url_encode }}.php" data-location="{{ location|default(config_weather_location)|url_encode }}" data-day="{{ day|default(1) }}">
			<div class="day"></div>
			<div class="highlow"></div>
			<div class="city"></div>
			<div class="cond"></div>
		</div>
	</div>
{% endmacro %}


/**
* Displays the forecast weather of the next 4 days
*
* @param {id} unique id for this widget
* @param {text=} location as string (optional)
* @param {duration=3h} the refresh interval for this widget using relative time format (optional, default 3h)
*
* @info based on jDigiClock by Radoslav Dimov
* @link http://www.radoslavdimov.com
*/
{% macro forecastweek(id, location, repeat) %}
	{% set uid = uid(page, id) %}

	{% if once('digiweather') %}
		<link rel="stylesheet" type="text/css" href="lib/weather/jdigiweather.css" />
	{% endif %}

	<div id="{{ uid }}-forecastweek" class="forecastweek" data-widget="weather.forecastweek" data-repeat="{{ repeat|default('3h') }}"
			data-service-url="lib/weather/service/{{ config_weather_service|url_encode }}.php" data-location="{{ location|default(config_weather_location)|url_encode }}">
	</div>
{% endmacro %}


/**
* A Block with a map. The type specifies the kind of map.
*
* @param {id} unique id for this widget
* @param {text=} title of the block
* @param {text(day,night,forecast,wind,europe)} the mode: 'day', 'night', 'forecast', 'wind', 'europe'
*
* @info Maps from tagesschau.de, Hessischer Rundfunk, Deutscher Wetterdienst
* @link http://www.tagesschau.de
*/
{% macro map(id, title, mode) %}
	{% import "multimedia.html" as multimedia %}

	<div class="block">
		<div class="ui-bar-c ui-li-divider ui-corner-top">{{ title }}</div>
		<div class="image">
			{% if mode == 'day' %}
				{{ multimedia.image(id, 'http://wetter.tagesschau.de/import/wetter-cms/vorhersagen/img/de-vs-tt_webL.jpg', 'corner-bottom') }}
			{% elseif mode == 'night' %}
				{{ multimedia.image(id, 'http://wetter.tagesschau.de/import/wetter-cms/vorhersagen/img/de-vs-tn_webL.jpg', 'corner-bottom') }}
			{% elseif mode == 'forecast' %}
				{{ multimedia.image(id, 'http://wetter.tagesschau.de/import/wetter-cms/vorhersagen/img/de-vs-3t_webL.jpg', 'corner-bottom') }}
			{% elseif mode == 'wind' %}
				{{ multimedia.image(id, 'http://wetter.tagesschau.de/import/wetter-cms/vorhersagen/img/de-vs-wi_webL.jpg', 'corner-bottom') }}
			{% elseif mode == 'europe' %}
				{{ multimedia.image(id, 'http://wetter.tagesschau.de/import/wetter-cms/vorhersagen/img/eu-vs-t_webL.jpg', 'corner-bottom') }}
			{% endif %}
		</div>
	</div>

{% endmacro %}


/**
* A block with some weather-maps in a slideshow
*
* @param {id} unique id for this widget
* @param {text=} title of the block
* @param {value=2} delay between the slides in sec (optional, default: 2 sec)
*
* @info based on cycle2 jquery-plugin: (c) 2012 M. Alsup; Dual licensed: MIT/GPL
* @link http://jquery.malsup.com/cycle2
*/
{% macro mapslides(id, title, delay) %}
	{% set uid = uid(page, id) %}

	<div class="block" data-widget="weather.mapslides">
		<div class="ui-bar-c ui-li-divider ui-corner-top">{{ title }}</div>
		<div class="image">
			<div id='{{ uid }}' data-cycle-auto-height="7:4" data-cycle-log="false" data-cycle-speed="{{ delay|default(2) * 1000 }}">
				<img class="ui-corner-bottom" src="http://wetter.tagesschau.de/import/wetter-cms/vorhersagen/img/de-vs-tt_webL.jpg" alt="day">
				<img class="ui-corner-bottom" src="http://wetter.tagesschau.de/import/wetter-cms/vorhersagen/img/de-vs-tn_webL.jpg" alt="night">
				<img class="ui-corner-bottom" src="http://wetter.tagesschau.de/import/wetter-cms/vorhersagen/img/de-vs-3t_webL.jpg" alt="forecast">
				<img class="ui-corner-bottom" src="http://wetter.tagesschau.de/import/wetter-cms/vorhersagen/img/de-vs-wi_webL.jpg" alt="wind">
				<img class="ui-corner-bottom" src="http://wetter.tagesschau.de/import/wetter-cms/vorhersagen/img/eu-vs-t_webL.jpg" alt="europe">
			</div>
		</div>
	</div>

{% endmacro %}



/**
 * -----------------------------------------------------------------------------
 * @package     smartVISU
 * @author      Martin Glei√ü
 * @copyright   2012
 * @license     GPL <http://www.gnu.de>
 * ----------------------------------------------------------------------------- 
 */ 


/**
 * Widget to place an app-symbol
 * If you write a app by yourself, place a @title, @icon, @color tag in your
 * header. These tags are used to display the symbol   
 * 
 * @param        the name of the app (located in pages/apps) 
 * @param        a titel of the app
 */
{% macro app(name, title) %}

    {% set app = docu('pages/apps/'~name~'.html') %}
    
    <div class="app">
        <a href="index.php?page={{ name }}">
            <div class="image" style="background-color: #{{ app.color }};"><img src="{{ app.icon }}"></div>
            <div>{{ title|default(app.title|e) }}</div>
        </a>
    </div>
{% endmacro %}


/**
 * Check for new updates of smartVISU
 */ 
{% macro updatecheck( ) %}
    /** Events */
    <script type="text/javascript">
        $('#{{ page }}').live('pagecreate',function(event, ui){ 
            $.getJSON('lib/base/updatecheck.php', function(data) {
                if (data.update)
                {
                    $('#alert img').attr('src', 'pages/base/pics/alert_update.png');
                    $('#alert a').attr('href', 'index.php?page=update&local=' + data.local + '&remote=' + data.remote);
                    $('#alert').show();
                }
            });
        });
    </script>  
{% endmacro %}